# Dashboard/Task ã‚·ã‚¹ãƒ†ãƒ 

ã‚¿ã‚¹ã‚¯ã®çŠ¶æ…‹ç®¡ç†ã¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºã‚’å®Ÿç¾ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®è§£èª¬ã§ã™ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Dashboard ã‚·ã‚¹ãƒ†ãƒ æ§‹é€                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  create_task    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Admin  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Dashboard File  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ (dashboard.md)  â”‚               â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  report_progress         â”‚                        â”‚
â”‚  â”‚ Worker  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚                        â”‚
â”‚                                       â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  get_dashboard   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Owner  â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ YAML + Markdown â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ (æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿)   â”‚              â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹å¯¾å¿œã®è¨­è¨ˆ

å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ç‹¬ç«‹ã—ãŸ MCP ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ä½œã™ã‚‹ãŸã‚ã€**ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¾ã›ã‚“**ã€‚

```
Admin ãƒ—ãƒ­ã‚»ã‚¹              Worker ãƒ—ãƒ­ã‚»ã‚¹
     â”‚                           â”‚
     â”‚ æ›¸ãè¾¼ã¿                   â”‚ æ›¸ãè¾¼ã¿
     â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         dashboard.md                â”‚
â”‚   (ãƒ•ã‚¡ã‚¤ãƒ«ãŒå”¯ä¸€ã®çœŸå®Ÿã®æº)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                           â”‚
     â”‚ èª­ã¿è¾¼ã¿                   â”‚ èª­ã¿è¾¼ã¿
     â–¼                           â–¼
Owner ãƒ—ãƒ­ã‚»ã‚¹              Admin ãƒ—ãƒ­ã‚»ã‚¹
```

**é‡è¦**: æ¯å›ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿æ›¸ãã™ã‚‹ãŸã‚ã€å¸¸ã«æœ€æ–°ã®çŠ¶æ…‹ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
{project}/.multi-agent-mcp/{session_id}/
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ dashboard.md          # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æœ¬ä½“
â””â”€â”€ tasks/
    â””â”€â”€ {agent_id}/           # Worker åˆ¥ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
        â””â”€â”€ task_{task_id}.md
```

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼

YAML Front Matter + Markdown æœ¬æ–‡:

```markdown
---
session_id: abc12345
created_at: 2024-01-15T10:00:00
tasks:
  - id: task-001
    title: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½
    status: in_progress
    progress: 50
    assigned_to: worker_xxx
    created_at: 2024-01-15T10:05:00
    started_at: 2024-01-15T10:10:00
    completed_at: null
    checklist:
      - text: API è¨­è¨ˆ
        completed: true
      - text: å®Ÿè£…
        completed: false
    logs:
      - timestamp: 2024-01-15T10:10:00
        message: ã‚¿ã‚¹ã‚¯é–‹å§‹
agents:
  - id: worker_xxx
    role: worker
    status: busy
    current_task: task-001
---

# Dashboard: abc12345

## ğŸ“Š ã‚µãƒãƒªãƒ¼

| é …ç›® | å€¤ |
| ---- | -- |
| ç·ã‚¿ã‚¹ã‚¯æ•° | 5 |
| å®Œäº† | 2 |
| é€²è¡Œä¸­ | 2 |
| æœªç€æ‰‹ | 1 |

## ğŸ“‹ ã‚¿ã‚¹ã‚¯ä¸€è¦§

| ID | ã‚¿ã‚¤ãƒˆãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | é€²æ— | æ‹…å½“ |
| -- | -------- | ---------- | ---- | ---- |
| task-001 | ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½ | ğŸ”„ é€²è¡Œä¸­ | 50% | worker_xxx |

## ğŸ‘¥ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§

| ID | ãƒ­ãƒ¼ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ |
| -- | ------ | ---------- | ------------ |
| worker_xxx | worker | busy | task-001 |
```

## ã‚¿ã‚¹ã‚¯çŠ¶æ…‹é·ç§»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚  â† create_task ã§ä½œæˆ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ assign_task_to_agent
       â”‚ ã¾ãŸã¯ Worker ãŒä½œæ¥­é–‹å§‹
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IN_PROGRESS â”‚  â† started_at ã‚’è¨˜éŒ²
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ report_task_completion
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETED  â”‚  â† completed_at ã‚’è¨˜éŒ²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       ã¾ãŸã¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FAILED    â”‚  â† completed_at ã‚’è¨˜éŒ²ã€ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’ä¿å­˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ…‹ã¨æ—¥æ™‚ã®è¨˜éŒ²

| çŠ¶æ…‹ | è¨˜éŒ²ã•ã‚Œã‚‹æ—¥æ™‚ |
| ---- | -------------- |
| PENDING | `created_at` |
| IN_PROGRESS | `started_at` |
| COMPLETED | `completed_at` |
| FAILED | `completed_at` |

## ãƒ„ãƒ¼ãƒ«ä¸€è¦§

| ãƒ„ãƒ¼ãƒ« | èª¬æ˜ | ä½¿ç”¨è€… |
| ------ | ---- | ------ |
| `create_task` | ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ | Admin |
| `update_task_status` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–° | Admin |
| `assign_task_to_agent` | Worker ã«å‰²ã‚Šå½“ã¦ | Admin |
| `list_tasks` | ã‚¿ã‚¹ã‚¯ä¸€è¦§å–å¾— | Admin, Owner |
| `get_task` | ã‚¿ã‚¹ã‚¯è©³ç´°å–å¾— | Admin, Worker |
| `remove_task` | ã‚¿ã‚¹ã‚¯å‰Šé™¤ | Admin |
| `report_task_progress` | é€²æ—å ±å‘Šï¼ˆWorkerç”¨ï¼‰ | Worker |
| `report_task_completion` | å®Œäº†å ±å‘Šï¼ˆWorkerç”¨ï¼‰ | Worker |
| `get_dashboard` | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å…¨ä½“å–å¾— | Owner, Admin |
| `get_dashboard_summary` | ã‚µãƒãƒªãƒ¼ã®ã¿å–å¾— | Owner, Admin |

## é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

### æ­£ãƒ‡ãƒ¼ã‚¿ã¨äºŒæ¬¡ãƒ‡ãƒ¼ã‚¿

| ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿ | èª¬æ˜ |
| ---- | ------ | ---- |
| **æ­£ãƒ‡ãƒ¼ã‚¿** | `list_tasks()` | ã‚¿ã‚¹ã‚¯ã®çœŸã®çŠ¶æ…‹ |
| **æ­£ãƒ‡ãƒ¼ã‚¿** | `list_agents()` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çœŸã®çŠ¶æ…‹ |
| äºŒæ¬¡ãƒ‡ãƒ¼ã‚¿ | `get_dashboard()` | æ•´å½¢ã•ã‚ŒãŸè¦ç´„ï¼ˆå‚è€ƒç”¨ï¼‰ |

**çŸ›ç›¾ãŒã‚ã‚‹å ´åˆã¯æ­£ãƒ‡ãƒ¼ã‚¿ã‚’ä¿¡ç”¨ã—ã¦ãã ã•ã„ã€‚**

### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨é€²æ—ã®é–¢ä¿‚

ã‚¿ã‚¹ã‚¯ã«ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãŒã‚ã‚‹å ´åˆã€é€²æ—ã¯è‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™:

```python
# ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä»˜ãã‚¿ã‚¹ã‚¯
create_task(
    title="èªè¨¼æ©Ÿèƒ½",
    description="...",
    checklist=[
        {"text": "API è¨­è¨ˆ", "completed": False},
        {"text": "å®Ÿè£…", "completed": False},
        {"text": "ãƒ†ã‚¹ãƒˆ", "completed": False}
    ]
)

# 1ã¤å®Œäº† â†’ é€²æ— 33%
# 2ã¤å®Œäº† â†’ é€²æ— 66%
# 3ã¤å®Œäº† â†’ é€²æ— 100%
```

### ãƒ­ã‚°ã®ä¿æŒ

å„ã‚¿ã‚¹ã‚¯ã¯æœ€æ–° 5 ä»¶ã®ãƒ­ã‚°ã‚’ä¿æŒã—ã¾ã™:

```python
# é€²æ—å ±å‘Šæ™‚ã«è‡ªå‹•ã§ãƒ­ã‚°è¿½åŠ 
report_task_progress(
    task_id="task-001",
    progress=50,
    message="API å®Ÿè£…å®Œäº†"
)

# ãƒ­ã‚°æ§‹é€ 
{
    "timestamp": "2024-01-15T10:30:00",
    "message": "API å®Ÿè£…å®Œäº†"
}
```

### Worker ã®å®Œäº†å ±å‘Šãƒ•ãƒ­ãƒ¼

```python
# 1. é€²æ—ã‚’éšæ™‚å ±å‘Šï¼ˆ25% ã”ã¨æ¨å¥¨ï¼‰
report_task_progress(
    task_id="task-001",
    progress=25,
    message="è¨­è¨ˆå®Œäº†",
    caller_agent_id="worker_xxx"
)

# 2. å®Œäº†æ™‚ã« report_task_completion ã‚’å‘¼ã¶
#    ï¼ˆDashboard æ›´æ–° + Admin ã¸ã® IPC è‡ªå‹•é€ä¿¡ï¼‰
report_task_completion(
    task_id="task-001",
    status="completed",
    message="ã‚¿ã‚¹ã‚¯å®Œäº†",
    summary="èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚JWT æ–¹å¼ã‚’æ¡ç”¨ã€‚",
    caller_agent_id="worker_xxx"
)
```

## ãƒ¬ã‚¬ã‚·ãƒ¼ JSON ã‹ã‚‰ã®ç§»è¡Œ

å¤ã„ JSON å½¢å¼ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯è‡ªå‹•çš„ã« Markdown å½¢å¼ã«å¤‰æ›ã•ã‚Œã¾ã™:

```
dashboard.json (æ—§)
       â”‚
       â”‚ è‡ªå‹•æ¤œå‡ºãƒ»å¤‰æ›
       â–¼
dashboard.md (æ–°)
```

**æ³¨æ„**: ç§»è¡Œå¾Œã€JSON ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

## Markdown ç”Ÿæˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã® Markdown å‡ºåŠ›ã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™:

- **ã‚µãƒãƒªãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«**: ã‚¿ã‚¹ã‚¯æ•°ã€å®Œäº†æ•°ã€é€²è¡Œä¸­æ•°ãªã©
- **ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«**: å„ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨é€²æ—
- **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«**: å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ…‹
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹çµµæ–‡å­—**: âœ… å®Œäº†ã€ğŸ”„ é€²è¡Œä¸­ã€â¸ï¸ æœªç€æ‰‹ã€âŒ å¤±æ•—

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¿ã‚¹ã‚¯ãŒè¡¨ç¤ºã•ã‚Œãªã„

ç¢ºèªäº‹é …:
1. `create_task` ã‚’å‘¼ã‚“ã ã‹
2. æ­£ã—ã„ `session_id` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹
3. `caller_agent_id` ã‚’æŒ‡å®šã—ãŸã‹

```python
# æ­£ã—ã„å‘¼ã³å‡ºã—ä¾‹
create_task(
    title="ã‚¿ã‚¹ã‚¯å",
    description="èª¬æ˜",
    caller_agent_id="admin_xxx"  # å¿…é ˆ
)
```

### é€²æ—ãŒæ›´æ–°ã•ã‚Œãªã„

ç¢ºèªäº‹é …:
1. `report_task_progress` ã‚’å‘¼ã‚“ã§ã„ã‚‹ã‹
2. Worker ã® `caller_agent_id` ãŒæ­£ã—ã„ã‹

```python
# Worker ã‹ã‚‰ã®é€²æ—å ±å‘Š
report_task_progress(
    task_id="task-001",
    progress=50,
    message="é€²æ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
    caller_agent_id="worker_xxx"  # Worker è‡ªèº«ã® ID
)
```

### Dashboard ã¨ list_tasks ã®çµæœãŒç•°ãªã‚‹

`get_dashboard` ã¯æ•´å½¢ã•ã‚ŒãŸè¡¨ç¤ºç”¨ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚
**æ­£ç¢ºãªçŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹ã«ã¯ `list_tasks` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚**

```python
# æ­£ç¢ºãªã‚¿ã‚¹ã‚¯çŠ¶æ…‹
tasks = list_tasks(caller_agent_id="admin_xxx")
for task in tasks:
    print(f"{task['id']}: {task['status']}")
```
